<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>Bootstrap Starter Template</title>
  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
  <!-- Custom styles for this template -->
  <style>
    body {
      padding-top: 5rem;
      background-image: url('GameBoard.jpg');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: top center;
      background-color: #000;
    }

    img {
      width: 100px;
      height: 150px;
    }


    .boardgame{
	padding: 10rem 1.5rem;
      width:1100px;
      margin:0 auto;
    }

    .starter-template {
      padding: 3rem 1.5rem;
      text-align: center;
    }

    .tab-body {
      padding: 1.5rem;
    }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</head>

  <div class="boardgame">
    <table id="cardTable" cellpadding="15">
      <thead></thead>
      <tbody id="cardTableBody"></tbody>
    </table>

  </div>

  <div id="modalstart" class="modal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Welcome to CivicMemory!</h5>
        </div>
        <div class="modal-body">
          <p>This game is timed, you have 1 minute to match all the cards!</p>
        </div>
        <div class="modal-footer">
          <button id="startButton" type="button" class="btn btn-primary">Start!</button>
        </div>
      </div>
    </div>
    <script>
      (function() {

        let cardArray = []; // the card array to hold all the playing cards

        // the card constructor to create new cards
        function Card(id, fileName, isFlipped) {
          this.id = id;
          this.fileName = fileName;
          this.isFlipped = isFlipped;
        }

        /*no two games should be the same, that wouldn't be any fun. Radomize the cards*/
        function shuffle(array) {
          var currentIndex = array.length,
            temporaryValue, randomIndex;

          // While there remain elements to shuffle...
          while (0 !== currentIndex) {

            // Pick a remaining element...
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex -= 1;

            // And swap it with the current element.
            temporaryValue = array[currentIndex];
            array[currentIndex] = array[randomIndex];
            array[randomIndex] = temporaryValue;
          }

          return array;
        }

        /*when the page loads show the welcome modal */
        $(document).ready(function() {
          $("#modalstart").show();
        });

        /* create the elements to hold the cards on the page */
        function buildBoard() {
          for (let i = 0; i < 12; i++) {
            var newCard = new Card(i, "cards/" + i + ".png", false);
            cardArray.push(newCard);
          }
          //all cards need a match so add the array to itself
          cardArray = cardArray.concat(cardArray);
          cardArray = shuffle(cardArray);

          //place on the page
          let cardtable = document.querySelector("#cardTableBody");

          let counter = 0;
          for (var j = 0; j < 3; j++) {
            var row = document.createElement("tr");
            for (var k = 0; k < 8; k++) {

              var cell = document.createElement("td");
              var figure = document.createElement("figure");
              figure.setAttribute("cardNumber", counter);
              var image = document.createElement("img");
              //image.src = cardArray[counter].fileName;
			  image.src = "CardBack.jpg";
              figure.appendChild(image);
              cell.appendChild(figure);
              row.appendChild(cell);
              image.click( function(){ flipCard(image, 5); });
              counter++;
              cardtable.appendChild(row);
            }
          }
        }

        function flipCard(cardImageNode, cardNumber)
        {
          cardImageNode.src = cardArray[cardNumber].fileName;
        }





        /* Ready, set, go!*/
        $("#startButton").click(function() {
          $(".modal").hide();
          buildBoard();
        });



        /*

        check if won - all cards are isFlipped = true

        turn - click two cards,
        card clicked - check if first or second card flip, if first do nothing,
        if second if the id's match, they stay - check if won, else flip

        when timer is over, flip all unflipped cards, display loosing modal

        */






      })();
    </script>
</body>

</html>
